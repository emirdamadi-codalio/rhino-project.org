# Background Jobs

[ActiveJob](https://guides.rubyonrails.org/active_job_basics.html) backed by [Resque](https://github.com/resque/resque) is the basis for background and scheduled jobs in Rhino Jobs.

## Installation

```bash
rails rhino_jobs:install
```

## Creating a job

```bash
rails g job Test
```

## Running a job

```ruby
TestJob.perform_later
```

## Scheduling a job

Edit resque_schedule.yml. See https://github.com/JustinAiken/active_scheduler for more details.

## Processing the queue

A worker for the queued jobs can be executed with:

```bash
COUNT=1 QUEUE=* bundle exec rails resque:workers
```

A worker to queue scheduled jobs can be executed with:

```bash
bundle exec rails resque:scheduler
```

### Heroku

On Heroku, Procfile is already updated to launch both a worker and a scheduler.
